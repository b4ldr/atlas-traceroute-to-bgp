{% extends "base.html" %}
{% import "macros.jinja" as macros %}
{% block my_content %}
  <div class="row">
  {% for asn in asns %}
    <div class="col-md-6">
      <h3>ASN: {{ asn.origin_asn }} IPv{{asn.ip_version }}</h3>
      <h4>Transit ASNs: <small>
    {% for _asn in asn.transit_asns_list %}
          <a href="{{ url_for('origin_asn', asn=_asn) }}">{{ _asn }}</a>
    {% endfor %}
      </small></h4> 
      <h4>Downstream ASNs: <small>
    {% for _asn in asn.downstream_asns_list %}
          <a href="{{ url_for('origin_asn', asn=_asn) }}">{{ _asn }}</a>
    {% endfor %}
      </small></h4> 
      <h4>Paths: <small>
        <table id="paths_{{asn.ip_version}}" class="table table-striped table-bordered">
        <thead>
          <th>Size</th>
          <th>Path</th>
        </thead>
        <tbody>
{% for path in asn.paths %}
          <tr>
            <td>{{ path|length }}</td>
            <td>{{ path.path }}</td>
          </tr>
{% endfor %}
        </tbody>
      </table>
    </div>
  {% endfor %}
    <div class="col-md-6">
      <div class="statwdgtauto" id="ripestat-overveiw"></div>
    </div>
    <div class="col-md-6">
      <div class="statwdgtauto" id="ripestat-neighbours"></div>
    </div>
  </div>
{% endblock %}
{% block scripts %}
{{super()}}
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap-wizard/1.2/jquery.bootstrap.wizard.min.js"></script>
<script src="https://stat.ripe.net/widgets/widget_api.js"></script>
<script>
$(document).ready(function() {
  ripestat.init(
    "as-overview",
    {"resource":"AS{{ asns[0].origin_asn_id }}"},
    "ripestat-overveiw",
    {"size":"compact",
      "disable":["title", "container", "logo", 
      "feedback", "maximize", "footer-buttons"]})
  ripestat.init(
    "asn-neighbours",
    {"resource":"AS{{ asns[0].origin_asn_id }}"},
    "ripestat-neighbours",
    {"size":"compact",
      "disable":["title", "container", "logo",
      "feedback", "maximize", "footer-buttons"]})
  $('#paths_4').dataTable()
  $('#paths_6').dataTable()
});
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
</script>
{% endblock %}
